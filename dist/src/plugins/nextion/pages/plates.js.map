{"version":3,"sources":["../../../../../src/plugins/nextion/pages/plates.js"],"names":["require","_","Plates","screenManager","options","setScreen","confirmResult","confirmType","data0","nanoDLP","command","addListener","console","log","changePage","init","getPlatesIndex","platesIndex","platesAll","platesStl","platesZip","undefined","i","length","Type","push","type","current_page_type","current_page_zip","PlateID","a","current_page_stl","Math","ceil","page_count_stl","page_count_zip","currentIndex","updateListAll","setText","pageFirstIdx","plates","Path","abstract"],"mappings":"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","file":"plates.js","sourcesContent":["import request from \"request-promise-native\";\r\n\r\nrequire(\"babel-polyfill\");\r\n\r\nimport abstract from \"./abstract.js\";\r\n\r\nlet _ = null;\r\n\r\nexport default class Plates extends abstract {\r\n    constructor(screenManager) {\r\n        super(screenManager);\r\n    }\r\n\r\n    async init(options) {\r\n        await this.setScreen(\"plates\");\r\n\r\n        if (options && options.confirmResult) {\r\n            if (options.confirmType === \"deleteplate\" && options.data0) {\r\n                await this.nanoDLP.command(\"/plate/delete/\" + options.data0);\r\n            }\r\n        }\r\n\r\n        this.addListener(\"click_b2\", () => {\r\n            console.log(\"plates click home\");\r\n            _ = this.changePage(\"home\");\r\n        });\r\n        this.addListener(\"click_b9\", () => {\r\n            console.log(\"plates click addPlate\");\r\n            _ = this.changePage(\"addPlate\");\r\n        });\r\n        this.addListener(\"click_b12\", () => {\r\n            console.log(\"refresh plates\");\r\n            _ = this.init(options);\r\n        });\r\n\r\n        this.platesIndex = await this.nanoDLP.getPlatesIndex();\r\n        this.platesAll = this.platesIndex.Plates;\r\n        this.platesStl = [];\r\n        this.platesZip = [];\r\n        if (this.platesAll === undefined){\r\n            this.platesAll = [];\r\n        }else{\r\n            for(let i=0;i<this.platesAll.length;i++){\r\n                if (this.platesAll[i].Type === \"stl\"){\r\n                    this.platesStl.push(this.platesAll[i]);\r\n                }else{\r\n                    this.platesZip.push(this.platesAll[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (options && options.type){\r\n            if (options.type === \"stl\"){\r\n                this.current_page_type = \"stl\";\r\n                this.current_page_zip = 1;\r\n                if (options.PlateID){\r\n                    let a = 0;\r\n                    for (let i=0;i<this.platesStl.length;i++){\r\n                        if (this.platesStl[i].PlateID === options.PlateID){\r\n                            a = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                    this.current_page_stl = Math.ceil((a + 1) / 4.0);\r\n                }else{\r\n                    this.current_page_stl = 1;\r\n                }\r\n            }else{\r\n                this.current_page_type = \"zip\";\r\n                this.current_page_stl = 1;\r\n                if (options.PlateID){\r\n                    let a = 0;\r\n                    for (let i=0;i<this.platesZip.length;i++){\r\n                        if (this.platesZip[i].PlateID === options.PlateID){\r\n                            a = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                    this.current_page_zip = Math.ceil((a + 1) / 4.0);\r\n                }else{\r\n                    this.current_page_zip = 1;\r\n                }\r\n            }\r\n        }else{\r\n            this.current_page_type = \"zip\";\r\n            this.current_page_stl = 1;\r\n            this.current_page_zip = 1;\r\n        }\r\n        this.page_count_stl = Math.ceil(this.platesStl.length / 4.0);\r\n        this.page_count_zip = Math.ceil(this.platesZip.length / 4.0);\r\n\r\n        //this.plates = await this.nanoDLP.getPlates();\r\n        /*if (this.plates === undefined) {\r\n            this.plates = [];\r\n            _ = this.changePage(\"home\");\r\n        }*/\r\n\r\n        //this.current_page = 1;\r\n        //this.page_count = Math.ceil(this.plates.length / 5.0);\r\n\r\n        this.addListener(\"click_b4\", () => {\r\n            if (this.current_page_type === \"stl\"){\r\n                if (this.currentIndex < this.platesStl.length) _ = this.changePage(\"setmodel\",this.platesStl[this.currentIndex]);\r\n            }else{\r\n                if (this.currentIndex < this.platesZip.length) _ = this.changePage(\"plate\", this.platesZip[this.currentIndex]);\r\n            }\r\n        });\r\n        this.addListener(\"click_b5\", () => {\r\n            //if ((this.currentIndex + 1) < this.plates.length) _ = this.changePage(\"plate\", this.plates[this.currentIndex + 1]);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                if (this.currentIndex + 1 < this.platesStl.length) _ = this.changePage(\"setmodel\",this.platesStl[this.currentIndex + 1]);\r\n            }else{\r\n                if (this.currentIndex + 1 < this.platesZip.length) _ = this.changePage(\"plate\", this.platesZip[this.currentIndex + 1]);\r\n            }\r\n        });\r\n        this.addListener(\"click_b6\", () => {\r\n            //if ((this.currentIndex + 2) < this.plates.length) _ = this.changePage(\"plate\", this.plates[this.currentIndex + 2]);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                if (this.currentIndex + 2 < this.platesStl.length) _ = this.changePage(\"setmodel\",this.platesStl[this.currentIndex + 2]);\r\n            }else{\r\n                if (this.currentIndex + 2 < this.platesZip.length) _ = this.changePage(\"plate\", this.platesZip[this.currentIndex + 2]);\r\n            }\r\n        });\r\n        this.addListener(\"click_b7\", () => {\r\n            //if ((this.currentIndex + 3) < this.plates.length) _ = this.changePage(\"plate\", this.plates[this.currentIndex + 3]);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                if (this.currentIndex + 3 < this.platesStl.length) _ = this.changePage(\"setmodel\",this.platesStl[this.currentIndex + 3]);\r\n                //if (this.currentIndex < this.platesStl.length) _ = this.changePage(\"plate\", this.platesStl[this.currentIndex + 3]);\r\n            }else{\r\n                if (this.currentIndex + 3 < this.platesZip.length) _ = this.changePage(\"plate\", this.platesZip[this.currentIndex + 3]);\r\n            }\r\n        });\r\n        this.addListener(\"click_b8\", () => {\r\n            //if ((this.currentIndex + 4) < this.plates.length) _ = this.changePage(\"plate\", this.plates[this.currentIndex + 4]);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                if (this.currentIndex + 4 < this.platesStl.length) _ = this.changePage(\"setmodel\",this.platesStl[this.currentIndex + 4]);\r\n            }else{\r\n                if (this.currentIndex + 4 < this.platesZip.length) _ = this.changePage(\"plate\", this.platesZip[this.currentIndex + 4]);\r\n            }\r\n        });\r\n        \r\n\r\n        this.addListener(\"click_b10\", () => {\r\n            //this.current_page = ((this.current_page - 2 + this.page_count) % this.page_count) + 1;\r\n            //_ = this.updateList((this.current_page - 1) * 5);\r\n            //_ = this.setText(\"t13\", this.current_page + '/' + this.page_count);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                this.current_page_stl = ((this.current_page_stl - 2 + this.page_count_stl) % this.page_count_stl) + 1;\r\n                _ = this.updateListAll((this.current_page_stl - 1) * 4, \"stl\");\r\n                _ = this.setText(\"t13\", this.current_page_stl + '/' + this.page_count_stl);\r\n            }else{\r\n                this.current_page_zip = ((this.current_page_zip - 2 + this.page_count_zip) % this.page_count_zip) + 1;\r\n                _ = this.updateListAll((this.current_page_zip - 1) * 4, \"zip\");\r\n                _ = this.setText(\"t13\", this.current_page_zip + '/' + this.page_count_zip);\r\n            }\r\n        });\r\n\r\n        this.addListener(\"click_b11\", () => {\r\n            //this.current_page = (this.current_page % this.page_count) + 1;\r\n            //_ = this.updateList((this.current_page - 1) * 5);\r\n            //_ = this.setText(\"t13\", this.current_page + '/' + this.page_count);\r\n\r\n            if (this.current_page_type === \"stl\"){\r\n                this.current_page_stl = (this.current_page_stl % this.page_count_stl) + 1;\r\n                _ = this.updateListAll((this.current_page_stl - 1) * 4, \"stl\");\r\n                _ = this.setText(\"t13\", this.current_page_stl + '/' + this.page_count_stl);\r\n            }else{\r\n                this.current_page_zip = (this.current_page_zip % this.page_count_zip) + 1;\r\n                _ = this.updateListAll((this.current_page_zip - 1) * 4, \"zip\");\r\n                _ = this.setText(\"t13\", this.current_page_zip + '/' + this.page_count_zip);\r\n            }\r\n        });\r\n\r\n        /*this.addListener(\"click_b12\", async () => {\r\n            this.plates = await this.nanoDLP.getPlates();\r\n\r\n            if (this.plates === undefined) {\r\n                _ = this.changePage(\"home\");\r\n            }\r\n\r\n            this.current_page = 1;\r\n            this.page_count = Math.ceil(this.plates.length / 5.0);\r\n            _ = this.setText(\"t13\", this.current_page + '/' + this.page_count);\r\n            _ = this.updateList(0);\r\n        });*/\r\n\r\n        this.addListener(\"click_b14\", async () => {\r\n            //_ = this.init({type:\"zip\"});\r\n            if (this.current_page_type === \"zip\"){\r\n                return;\r\n            }\r\n            this.current_page_type = \"zip\";\r\n            _ = this.setText(\"t13\", this.current_page_zip + '/' + this.page_count_zip);\r\n            _ = this.updateListAll(0, \"zip\");\r\n        });\r\n\r\n        this.addListener(\"click_b15\", async () => {\r\n            //_ = this.init({type:\"stl\"});\r\n            if (this.current_page_type === \"stl\"){\r\n                return;\r\n            }\r\n            this.current_page_type = \"stl\";\r\n            _ = this.setText(\"t13\", this.current_page_stl + '/' + this.page_count_stl);\r\n            _ = this.updateListAll(0, \"stl\");\r\n        });\r\n\r\n        //_ = this.setText(\"t13\", this.current_page + '/' + this.page_count);\r\n        //_ = this.updateList(0);\r\n\r\n        if (options && options.type){\r\n            if (options.type === \"stl\"){\r\n                _ = this.setText(\"t13\", this.current_page_stl + '/' + this.page_count_stl);\r\n                _ = this.updateListAll((this.current_page_stl - 1) * 4, \"stl\");\r\n            }else{\r\n                _ = this.setText(\"t13\", this.current_page_zip + '/' + this.page_count_zip);\r\n                _ = this.updateListAll((this.current_page_zip - 1) * 4, \"zip\");\r\n            }\r\n        }else{\r\n            _ = this.setText(\"t13\", this.current_page_zip + '/' + this.page_count_zip);\r\n            _ = this.updateListAll(0, \"zip\");\r\n        }\r\n\r\n        this.addListener(\"click_b19\", () => {\r\n            _ = this.changePage(\"printingHome\",\"back\");\r\n        });\r\n    }\r\n\r\n    async updateList(pageFirstIdx) {\r\n        this.currentIndex = pageFirstIdx;\r\n        _ = this.setText(\"b4\", this.plates.length > pageFirstIdx ? (pageFirstIdx + 1) + \". \" + this.plates[pageFirstIdx].Path : \"\");\r\n        _ = this.setText(\"b5\", this.plates.length > pageFirstIdx + 1 ? (pageFirstIdx + 2) + \". \" + this.plates[pageFirstIdx + 1].Path : \"\");\r\n        _ = this.setText(\"b6\", this.plates.length > pageFirstIdx + 2 ? (pageFirstIdx + 3) + \". \" + this.plates[pageFirstIdx + 2].Path : \"\");\r\n        _ = this.setText(\"b7\", this.plates.length > pageFirstIdx + 3 ? (pageFirstIdx + 4) + \". \" + this.plates[pageFirstIdx + 3].Path : \"\");\r\n        _ = this.setText(\"b8\", this.plates.length > pageFirstIdx + 4 ? (pageFirstIdx + 5) + \". \" + this.plates[pageFirstIdx + 4].Path : \"\");\r\n    }\r\n\r\n    async updateListAll(pageFirstIdx, type){\r\n        this.platesIndex = await this.nanoDLP.getPlatesIndex();\r\n        this.platesAll = this.platesIndex.Plates;\r\n        this.platesStl = [];\r\n        this.platesZip = [];\r\n        if (this.platesAll === undefined){\r\n            this.platesAll = [];\r\n        }else{\r\n            for(let i=0;i<this.platesAll.length;i++){\r\n                if (this.platesAll[i].Type === \"stl\"){\r\n                    this.platesStl.push(this.platesAll[i]);\r\n                }else{\r\n                    this.platesZip.push(this.platesAll[i]);\r\n                }\r\n            }\r\n        }\r\n        this.currentIndex = pageFirstIdx;\r\n        if (type === \"stl\"){\r\n            _ = this.setText(\"b4\", this.platesStl.length > pageFirstIdx ? (pageFirstIdx + 1) + \". \" + this.platesStl[pageFirstIdx].Path : \"\");\r\n            _ = this.setText(\"b5\", this.platesStl.length > pageFirstIdx + 1 ? (pageFirstIdx + 2) + \". \" + this.platesStl[pageFirstIdx + 1].Path : \"\");\r\n            _ = this.setText(\"b6\", this.platesStl.length > pageFirstIdx + 2 ? (pageFirstIdx + 3) + \". \" + this.platesStl[pageFirstIdx + 2].Path : \"\");\r\n            _ = this.setText(\"b7\", this.platesStl.length > pageFirstIdx + 3 ? (pageFirstIdx + 4) + \". \" + this.platesStl[pageFirstIdx + 3].Path : \"\");\r\n            //_ = this.setText(\"b8\", this.platesStl.length > pageFirstIdx + 4 ? (pageFirstIdx + 5) + \". \" + this.platesStl[pageFirstIdx + 4].Path : \"\");\r\n        }else{\r\n            _ = this.setText(\"b4\", this.platesZip.length > pageFirstIdx ? (pageFirstIdx + 1) + \". \" + this.platesZip[pageFirstIdx].Path : \"\");\r\n            _ = this.setText(\"b5\", this.platesZip.length > pageFirstIdx + 1 ? (pageFirstIdx + 2) + \". \" + this.platesZip[pageFirstIdx + 1].Path : \"\");\r\n            _ = this.setText(\"b6\", this.platesZip.length > pageFirstIdx + 2 ? (pageFirstIdx + 3) + \". \" + this.platesZip[pageFirstIdx + 2].Path : \"\");\r\n            _ = this.setText(\"b7\", this.platesZip.length > pageFirstIdx + 3 ? (pageFirstIdx + 4) + \". \" + this.platesZip[pageFirstIdx + 3].Path : \"\");\r\n            //_ = this.setText(\"b8\", this.platesZip.length > pageFirstIdx + 4 ? (pageFirstIdx + 5) + \". \" + this.platesZip[pageFirstIdx + 4].Path : \"\");\r\n        }\r\n    }\r\n}\r\n"]}