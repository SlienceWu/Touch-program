{"version":3,"sources":["../../../../../src/plugins/nextion/pages/printSettings.js"],"names":["require","_","PrintSettings","screenManager","options","setScreen","confirmResult","confirmType","nanoDLP","pause","changePage","stop","addListener","text","returnPage","string","history","profile","CureTime","Number","setCureTime","ProfileID","status","getPlates","plates","plate","lodash","findIndex","PlateID","getProfiles","profiles","abstract"],"mappings":";;;;;;;;AAEA;;;;AACA;;;;;;;;;;;;;;AAHAA,QAAQ,gBAAR;;AAKA,IAAIC,IAAI,IAAR;;IAEqBC,a;;;AAEjB,2BAAYC,aAAZ,EAA2B;AAAA;;AAAA,6HACjBA,aADiB;AAE1B;;;;;iGAEUC,O;;;;;;;;uCACD,KAAKC,SAAL,CAAe,aAAf,C;;;;;sCAGED,WAAWA,QAAQE,aAAnB,IAAoCF,QAAQE,a;;;;;+CACpCF,QAAQG,W;kEACP,O,wBAKA,M;;;;AAJD,qCAAKC,OAAL,CAAaC,KAAb;AACAR,oCAAI,KAAKS,UAAL,CAAgB,MAAhB,CAAJ;;;;AAIA,qCAAKF,OAAL,CAAaG,IAAb;AACAV,oCAAI,KAAKS,UAAL,CAAgB,MAAhB,CAAJ;;;;;;;;;;;;;AAOhB,qCAAKE,WAAL,CAAiB,UAAjB,EAA6B,YAAM;AAC/BX,wCAAI,OAAKS,UAAL,CAAgB,MAAhB,CAAJ;AACH,iCAFD;;AAIA,qCAAKE,WAAL,CAAiB,UAAjB,EAA6B,YAAM;AAC/BX,wCAAI,OAAKS,UAAL,CAAgB,SAAhB,EAA2B;AAC3BG,8CAAM,+FADqB;AAEzBN,qDAAa,OAFY;AAGzBO,oDAAY;AAHa,qCAA3B,CAAJ;AAKH,iCAND;;AAQA,qCAAKF,WAAL,CAAiB,UAAjB,EAA6B,YAAM;AAC/BX,wCAAI,OAAKS,UAAL,CAAgB,SAAhB,EAA2B;AAC3BG,8CAAM,6FADqB;AAEzBN,qDAAa,MAFY;AAGzBO,oDAAY;AAHa,qCAA3B,CAAJ;AAKH,iCAND;;AAQA,qCAAKF,WAAL,CAAiB,QAAjB;AAAA,wGAA2B,iBAAOG,MAAP;AAAA;AAAA;AAAA;AAAA;AACvB,+DAAKC,OAAL,GAAe,EAAf;;AAEA,4DAAID,WAAW,QAAf,EAAyB;AACrB,mEAAKE,OAAL,CAAaC,QAAb,GAAwBC,OAAOJ,MAAP,CAAxB;AACA,mEAAKP,OAAL,CAAaY,WAAb,CAAyB,OAAKH,OAAL,CAAaI,SAAtC,EAAiD,OAAKJ,OAAtD;AACAhB,gEAAI,OAAKS,UAAL,CAAgB,MAAhB,CAAJ;AACH;;AAPsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAA3B;;AAAA;AAAA;AAAA;AAAA;;AAUA,qCAAKU,WAAL,GAAmB,KAAnB;;;;;;;;;;;;;;;;;;;kGAGSE,M;;;;;AACT,qCAAKA,MAAL,GAAcA,MAAd;;sCAEI,KAAKF,WAAL,KAAqB,K;;;;;AACrB,qCAAKA,WAAL,GAAmB,IAAnB;;uCACoB,KAAKZ,OAAL,CAAae,SAAb,E;;;AAApB,qCAAKC,M;;AACL,qCAAKC,KAAL,GAAa,KAAKD,MAAL,CAAYE,iBAAOC,SAAP,CAAiB,KAAKH,MAAtB,EAA8B,EAACI,SAAS,KAAKN,MAAL,CAAYM,OAAtB,EAA9B,CAAZ,CAAb;;;uCAEsB,KAAKpB,OAAL,CAAaqB,WAAb,E;;;AAAtB,qCAAKC,Q;;AACL,qCAAKb,OAAL,GAAe,KAAKa,QAAL,CAAcJ,iBAAOC,SAAP,CAAiB,KAAKG,QAAtB,EAAgC,EAACT,WAAW,KAAKI,KAAL,CAAWJ,SAAvB,EAAhC,CAAd,CAAf;;;;;;;;;;;;;;;;;;;EApE+BU,kB;;kBAAtB7B,a","file":"printSettings.js","sourcesContent":["require(\"babel-polyfill\");\r\n\r\nimport abstract from \"./abstract.js\";\r\nimport lodash from \"lodash\";\r\n\r\nlet _ = null;\r\n\r\nexport default class PrintSettings extends abstract {\r\n\r\n    constructor(screenManager) {\r\n        super(screenManager);\r\n    }\r\n\r\n    async init(options) {\r\n        await this.setScreen(\"prtSettings\");\r\n\r\n        try {\r\n            if (options && options.confirmResult && options.confirmResult) {\r\n                switch (options.confirmType) {\r\n                    case \"pause\":\r\n                        this.nanoDLP.pause();\r\n                        _ = this.changePage(\"home\");\r\n                        break;\r\n\r\n                    case \"stop\":\r\n                        this.nanoDLP.stop();\r\n                        _ = this.changePage(\"home\");\r\n                        break;\r\n                }\r\n            }\r\n        } catch (e) {\r\n        }\r\n\r\n        this.addListener(\"click_b4\", () => {\r\n            _ = this.changePage(\"home\");\r\n        });\r\n\r\n        this.addListener(\"click_b3\", () => {\r\n            _ = this.changePage(\"confirm\", {\r\n                text: \"Are you sure you want to pause\\r printing?\\rIt will pause after the current\\rlayer completed.\"\r\n                , confirmType: \"pause\"\r\n                , returnPage: \"printSettings\"\r\n            })\r\n        });\r\n\r\n        this.addListener(\"click_b2\", () => {\r\n            _ = this.changePage(\"confirm\", {\r\n                text: \"Are you sure you want to stop\\r printing?\\rIt will stop after the current\\rlayer completed.\"\r\n                , confirmType: \"stop\"\r\n                , returnPage: \"printSettings\"\r\n            });\r\n        });\r\n\r\n        this.addListener(\"string\", async (string) => {\r\n            this.history = {};\r\n\r\n            if (string !== \"cancel\") {\r\n                this.profile.CureTime = Number(string);\r\n                this.nanoDLP.setCureTime(this.profile.ProfileID, this.profile);\r\n                _ = this.changePage(\"home\");\r\n            }\r\n        });\r\n\r\n        this.setCureTime = false;\r\n    }\r\n\r\n    async update(status) {\r\n        this.status = status;\r\n\r\n        if (this.setCureTime === false) {\r\n            this.setCureTime = true;\r\n            this.plates = await this.nanoDLP.getPlates();\r\n            this.plate = this.plates[lodash.findIndex(this.plates, {PlateID: this.status.PlateID})];\r\n\r\n            this.profiles = await this.nanoDLP.getProfiles();\r\n            this.profile = this.profiles[lodash.findIndex(this.profiles, {ProfileID: this.plate.ProfileID})];\r\n        }\r\n    }\r\n\r\n}\r\n"]}